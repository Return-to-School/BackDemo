<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ncu.newmedia.backschool.dao.ActivityDao">

    <resultMap id="activityMap" type="Activity">
        <id property="id" column="activity_id"/>
        <result property="name" column="activity_name" />
        <result property="applyStartTime" column="apply_start_time" />
        <result property="applyEndTime" column="apply_end_time" />
        <result property="feedbackStartTime" column="feedback_start_time" />
        <result property="feedbackEndTime" column="feedback_end_time" />
        <result property="creator" column="creator" />
        <result property="createTime" column="create_time" />
        <result property="filePath" column="activity_file_path" />
    </resultMap>

    <insert id="insert" useGeneratedKeys="true" keyProperty="activity.id">
        insert into activity values (#{activity.id},#{activity.name},#{activity.applyStartTime},
                                     #{activity.applyEndTime},#{activity.feedbackStartTime},
                                     #{activity.feedbackEndTime},#{activity.creator},
                                     #{activity.createTime},#{activity.content},
                                     #{activity.filePath}
                                     );
    </insert>

    <update id="update">
        update activity set activity_name = #{activity.name},
                            apply_start_time = #{activity.applyStartTime},
                            apply_end_time = #{activity.applyEndTime},
                            feedback_start_time = #{activity.feedbackStartTime},
                            feedback_end_time = #{activity.feedbackEndTime},
                            creator = #{activity.creator},
                            create_time = #{activity.createTime},
                            content = #{activity.content},
                            activity_file_path = #{activity.filePath} where
                            activity_id = #{activity.id};
    </update>

    <delete id="delete">
        delete from activity where activity_id = #{activityId}
    </delete>

    <select id="getActivityByValue" resultMap="activityMap">
        select * from activity where ${column} = #{value};
    </select>

    <select id="listAll" resultMap="activityMap">
        select * from activity;
    </select>

</mapper>