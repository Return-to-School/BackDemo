<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ncu.newmedia.backschool.dao.UserDao">

    <resultMap id="userMap" type="User">
        <id property="id" column="user_id" />
        <result property="password" column="password" />
        <result property="account" column="account" />
    </resultMap>

    <resultMap id="groupManagerMap" type="User">
        <id property="id" column="user_id"></id>
        <result property="password" column="password" />
        <result property="account" column="account" />
        <collection property="activities" column="activity_id" ofType="Activity"
                    resultMap="cn.ncu.newmedia.backschool.dao.ActivityDao.activityMap" />

    </resultMap>

    <select id="getPasswordByAccount" resultType="String">
        select password from user where account = #{account}
    </select>

    <select id="userExist">
        select count(*) from user where account = #{account}
    </select>

    <select id="getUserByColumn" resultMap="userMap">
        select * from user where ${column} = #{value}
    </select>

    <select id="getGroupManagerById" resultMap="groupManagerMap">
        select * from user u,activity a,activity_manager am where
          u.user_id = am.user_id and a.activity_id = am.activity_id and u.user_id = #{userId};
    </select>

    <select id="listAll" resultMap="userMap">
        select * from user;
    </select>
</mapper>